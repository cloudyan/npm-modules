# supervisor

[supervisor](https://www.npmjs.com/package/supervisor)

- supervisor: 一般用作开发环境的使用。
- forever: 管理多个站点，一般每个站点的访问量不大的情况，不需要监控。
- PM2: 网站的访问量比较大，需要完整的监控页面。

`supervisor` 监听文件变化，刷新运行中的服务脚本，使用 `pm2`、`forever` 也可以

在开发nodejs程序，调试的时候，无论你修改了代码的哪一部分，都需要重启服务才能生效。这是因为 Node.js 只有在第一次引用到某部份时才会去解析脚本文件，以后都会直接访问内存，避免重复载入。

Node.js的这种设计虽然有利于提高性能，却不利于开发调试，因为我们在开发过程中总是希望修改后立即看到效果，而不是每次都要终止进程并重启。`supervisor` 可以帮助你实现这个功能，它会监视你对代码的改动，并自动重启 Node.js。

这种方式启动的服务，是默认监控所有文件、文件夹的变化的；一旦有变化，**服务就会重启**

这样也就出现了一些问题：我们会将一些日志文件存入某些文件夹，或者用户会上传附件到服务器；而这样的操作都导致了服务器文件的变化，必然会引起node服务器的重启。试想一下，如果每一次上传都重启一次，那用户操作一旦频繁起来，服务器啥都不用干，每天重启就行了

所以说，`supervisor`的这种工作方式，仅仅**适用于调试阶段**；甚至于有一些调试环境都不适合（比如调试服务器在远程，网络状态不是很好的情况下）。

## 运行

```bash
supervisor app.js
```

参考：

- https://www.jianshu.com/p/6d84e5efe99d
- https://www.cnblogs.com/pigtail/archive/2013/01/08/2851056.html
